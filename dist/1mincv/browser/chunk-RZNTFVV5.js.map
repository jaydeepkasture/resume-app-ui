{
  "version": 3,
  "sources": ["src/app/billing/pages/subscription.component.ts", "src/app/billing/pages/subscription.component.html"],
  "sourcesContent": ["import { Component, OnInit } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BillingApiService } from '../services/billing-api.service';\r\nimport { UserSubscription } from '../../models/billing.models';\r\n\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-subscription',\r\n  standalone: true,\r\n  imports: [CommonModule],\r\n  templateUrl: './subscription.component.html',\r\n  styleUrl: './subscription.component.css'\r\n})\r\nexport class SubscriptionComponent implements OnInit {\r\n\r\n  subscription?: UserSubscription;\r\n  loading = true;\r\n\r\n  constructor(private billingApi: BillingApiService, private router: Router) {}\r\n\r\n  ngOnInit() {\r\n    this.loadSubscription();\r\n  }\r\n\r\n  goToPlans() {\r\n    this.router.navigate(['/billing/plans']);\r\n  }\r\n\r\n  loadSubscription() {\r\n    this.loading = true;\r\n    this.billingApi.getMySubscription().subscribe({\r\n      next: (res) => {\r\n        // According to our BillingApiService update, getMySubscription() returns UserSubscription directly\r\n        // But let's be safe and check for .data\r\n        this.subscription = (res as any).data || res;\r\n        this.loading = false;\r\n      },\r\n      error: (err) => {\r\n        console.error('Failed to load subscription:', err);\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  cancel() {\r\n    if (!confirm('Are you sure you want to cancel your auto-renewal? You will still have access until the end of your billing period.')) return;\r\n\r\n    this.billingApi.cancelSubscription().subscribe({\r\n      next: (res) => {\r\n        if (res.status) {\r\n          alert('Subscription auto-renewal has been cancelled.');\r\n          this.loadSubscription();\r\n        } else {\r\n          alert(res.message || 'Failed to cancel subscription.');\r\n        }\r\n      },\r\n      error: (err) => {\r\n        console.error('Cancellation error:', err);\r\n        alert('An error occurred while cancelling your subscription.');\r\n      }\r\n    });\r\n  }\r\n}\r\n", "<div class=\"billing-page\">\r\n  <div class=\"billing-header\">\r\n    <h1>Your Subscription</h1>\r\n    <p>Manage your billing and subscription details.</p>\r\n  </div>\r\n\r\n  <div *ngIf=\"loading\" class=\"loading-state\">\r\n    <div class=\"spinner\"></div>\r\n  </div>\r\n\r\n  <div *ngIf=\"!loading && !subscription\" class=\"no-subscription-card\">\r\n    <div class=\"card-icon\">\r\n      <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\">\r\n        <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\r\n        <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line>\r\n      </svg>\r\n    </div>\r\n    <h3>No Active Subscription</h3>\r\n    <p>Get started by choosing a plan that works for you.</p>\r\n    <button class=\"primary-btn\" (click)=\"goToPlans()\">Browse Plans</button>\r\n  </div>\r\n\r\n  <div *ngIf=\"!loading && subscription\" class=\"subscription-card\">\r\n    <div class=\"subscription-status\" [class.active]=\"subscription.status === 'Active'\">\r\n      {{ subscription.status }}\r\n    </div>\r\n    \r\n    <div class=\"plan-info\">\r\n      <h3>{{ subscription.plan }} Plan</h3>\r\n      <div class=\"date-info\">\r\n        <div class=\"date-row\">\r\n          <span class=\"label\">Renewing/Ending on:</span>\r\n          <span class=\"value\">{{ subscription.endDate | date:'mediumDate' }}</span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"benefits-section\">\r\n        <h4>Included Benefits:</h4>\r\n        <ul class=\"benefits-list\">\r\n          <li>\r\n            <strong>Templates:</strong> \r\n            {{ subscription.benefits['TEMPLATE_LIMIT'] }}\r\n          </li>\r\n          <li>\r\n            <strong>AI Rate Limit:</strong> \r\n            {{ subscription.benefits['RATE_LIMIT_PER_MINUTE'] }} requests/min\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"card-footer\">\r\n      <button class=\"cancel-btn\" (click)=\"cancel()\" *ngIf=\"subscription.status === 'Active'\">\r\n        Cancel Auto-Renewal\r\n      </button>\r\n      <div class=\"renewal-info\" *ngIf=\"subscription.status !== 'Active'\">\r\n        Your access will continue until {{ subscription.endDate | date }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],
  "mappings": "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",
  "names": []
}
